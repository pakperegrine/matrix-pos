<div class="pending-transactions-container">
  <div class="header">
    <div class="header-left">
      <h3>Pending Transactions</h3>
      <span class="count-badge" *ngIf="pendingSales.length > 0">
        {{ pendingSales.length }}
      </span>
    </div>
    <div class="header-right">
      <button 
        class="btn-refresh" 
        (click)="loadPendingSales()"
        [disabled]="loading"
        title="Refresh list"
      >
        <span class="icon" [class.spinning]="loading">ğŸ”„</span>
      </button>
      <button 
        class="btn-sync-all" 
        (click)="syncAll()"
        [disabled]="loading || pendingSales.length === 0"
      >
        <span *ngIf="!loading">Sync All</span>
        <span *ngIf="loading">Syncing...</span>
      </button>
    </div>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="pendingSales.length === 0 && !loading">
    <div class="empty-icon">âœ…</div>
    <h4>All Synced!</h4>
    <p>There are no pending transactions.</p>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="loading && pendingSales.length === 0">
    <div class="spinner-large"></div>
    <p>Loading pending transactions...</p>
  </div>

  <!-- Transactions List -->
  <div class="transactions-list" *ngIf="pendingSales.length > 0">
    <div 
      class="transaction-card" 
      *ngFor="let sale of pendingSales"
      [class.failed]="sale.sync_status === 'failed'"
      [class.syncing]="sale.sync_status === 'syncing'"
    >
      <!-- Card Header -->
      <div class="card-header">
        <div class="invoice-info">
          <span class="invoice-no">{{ sale.temp_invoice_no }}</span>
          <span class="date">{{ formatDate(sale.created_at) }}</span>
        </div>
        <span class="status-badge" [class]="getStatusClass(sale.sync_status)">
          {{ getStatusText(sale.sync_status) }}
        </span>
      </div>

      <!-- Card Body -->
      <div class="card-body">
        <div class="info-row">
          <span class="label">Customer:</span>
          <span class="value">{{ sale.customer_name }}</span>
        </div>
        <div class="info-row">
          <span class="label">Amount:</span>
          <span class="value amount">${{ sale.total_amount.toFixed(2) }}</span>
        </div>
        <div class="info-row">
          <span class="label">Payment:</span>
          <span class="value">{{ sale.payment_method }}</span>
        </div>
        <div class="info-row">
          <span class="label">Items:</span>
          <span class="value">{{ sale.items.length }} item{{ sale.items.length !== 1 ? 's' : '' }}</span>
        </div>
        <div class="info-row" *ngIf="sale.retry_count > 0">
          <span class="label">Retry Count:</span>
          <span class="value retry-count">{{ sale.retry_count }}</span>
        </div>
      </div>

      <!-- Error Message -->
      <div class="error-message" *ngIf="sale.sync_error">
        <span class="error-icon">âš ï¸</span>
        <span class="error-text">{{ sale.sync_error }}</span>
      </div>

      <!-- Card Actions -->
      <div class="card-actions">
        <button 
          class="btn-retry" 
          (click)="retrySale(sale)"
          [disabled]="isRetryDisabled(sale)"
        >
          <span *ngIf="!retryingIds.has(sale.id!)">ğŸ”„ Retry</span>
          <span *ngIf="retryingIds.has(sale.id!)">Retrying...</span>
        </button>
        <button 
          class="btn-delete" 
          (click)="deleteSale(sale)"
          [disabled]="isDeleteDisabled(sale)"
        >
          <span *ngIf="!deletingIds.has(sale.id!)">ğŸ—‘ï¸ Delete</span>
          <span *ngIf="deletingIds.has(sale.id!)">Deleting...</span>
        </button>
      </div>
    </div>
  </div>
</div>
