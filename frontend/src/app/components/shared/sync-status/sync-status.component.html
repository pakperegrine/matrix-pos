<div class="sync-status-container">
  <!-- Compact Status Badge -->
  <div class="sync-badge" [class]="getStatusClass()" (click)="toggleDetails()">
    <span class="status-icon">{{ getStatusIcon() }}</span>
    <span class="status-text">{{ getStatusText() }}</span>
    <span class="toggle-arrow" [class.expanded]="showDetails">▼</span>
  </div>

  <!-- Details Panel (Collapsible) -->
  <div class="sync-details" *ngIf="showDetails">
    <div class="details-header">
      <h4>Sync Status</h4>
      <button class="close-btn" (click)="toggleDetails()">×</button>
    </div>

    <div class="details-body">
      <!-- Connection Status -->
      <div class="detail-row">
        <span class="label">Connection:</span>
        <span class="value" [class.online]="syncStatus.isOnline" [class.offline]="!syncStatus.isOnline">
          {{ syncStatus.isOnline ? 'Online' : 'Offline' }}
        </span>
      </div>

      <!-- Pending Transactions -->
      <div class="detail-row">
        <span class="label">Pending:</span>
        <span class="value" [class.has-pending]="syncStatus.pendingCount > 0">
          {{ syncStatus.pendingCount }} transaction{{ syncStatus.pendingCount !== 1 ? 's' : '' }}
        </span>
      </div>

      <!-- Last Sync Time -->
      <div class="detail-row">
        <span class="label">Last Sync:</span>
        <span class="value">{{ getLastSyncText() }}</span>
      </div>

      <!-- Sync Status -->
      <div class="detail-row" *ngIf="syncStatus.isSyncing">
        <span class="label">Status:</span>
        <span class="value syncing">
          <span class="spinner"></span>
          Syncing...
        </span>
      </div>

      <!-- Error Message -->
      <div class="detail-row error-row" *ngIf="syncStatus.lastError">
        <span class="label">Error:</span>
        <span class="value error">{{ syncStatus.lastError }}</span>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button 
          class="btn-primary" 
          (click)="manualSync()"
          [disabled]="!syncStatus.isOnline || syncStatus.isSyncing || isManualSyncing || syncStatus.pendingCount === 0"
        >
          <span *ngIf="!isManualSyncing">Sync Now</span>
          <span *ngIf="isManualSyncing">Syncing...</span>
        </button>

        <button 
          class="btn-secondary" 
          (click)="testConnection()"
          [disabled]="syncStatus.isSyncing || isManualSyncing"
        >
          Test Connection
        </button>
      </div>

      <!-- Help Text -->
      <div class="help-text">
        <small *ngIf="!syncStatus.isOnline">
          ⚠️ You're offline. Transactions will sync automatically when connection is restored.
        </small>
        <small *ngIf="syncStatus.isOnline && syncStatus.pendingCount > 0">
          ℹ️ Automatic sync runs every 30 seconds.
        </small>
        <small *ngIf="syncStatus.isOnline && syncStatus.pendingCount === 0">
          ✅ All transactions synced successfully!
        </small>
      </div>
    </div>
  </div>
</div>
